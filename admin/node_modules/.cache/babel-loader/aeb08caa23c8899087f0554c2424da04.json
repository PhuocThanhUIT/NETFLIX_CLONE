{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\H\\u1EE9aPh\\u01B0\\u1EDBcThanh\\\\Pictures\\\\NETFLIX_CLONE\\\\admin\\\\src\\\\pages\\\\movie\\\\Movie.jsx\",\n    _s = $RefreshSig$();\n\nimport { Link, useLocation } from \"react-router-dom\";\nimport \"./movie.css\";\nimport { Publish } from \"@material-ui/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Movie() {\n  _s();\n\n  const location = useLocation();\n  const movies = location.movie;\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(0);\n  const {\n    dispatch\n  } = useContext(MovieContext);\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movie,\n      [e.target.name]: value\n    });\n  };\n\n  const upload = items => {\n    items.forEach(item => {\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const storage = getStorage();\n      const storageRef = ref(storage, `/items/${fileName}`);\n      const uploadTask = uploadBytesResumable(storageRef, item.file); //const uploadTask = storage.storage().ref(`/items/${fileName}`).put(item.file);\n\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n\n        switch (snapshot.state) {\n          case 'paused':\n            console.log('Upload is paused');\n            break;\n\n          case 'running':\n            console.log('Upload is running');\n            break;\n        }\n      }, error => {\n        switch (error.code) {\n          case 'storage/unauthorized':\n            // User doesn't have permission to access the object\n            break;\n\n          case 'storage/canceled':\n            // User canceled the upload\n            break;\n          // ...\n\n          case 'storage/unknown':\n            // Unknown error occurred, inspect error.serverResponse\n            break;\n        }\n      }, () => {\n        getDownloadURL(uploadTask.snapshot.ref).then(url => {\n          setMovie(prev => {\n            return { ...prev,\n              [item.label]: url\n            };\n          });\n          setUploaded(prev => prev + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    upload([{\n      file: img,\n      label: \"img\"\n    }, {\n      file: trailer,\n      label: \"trailer\"\n    }, {\n      file: video,\n      label: \"video\"\n    }]);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    updateMovie(movies._id, movie, dispatch);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productTitleContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"productTitle\",\n        children: \"Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/newproduct\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"productAddButton\",\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productTop\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productTopRight\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoTop\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: movies.img,\n            alt: \"\",\n            className: \"productInfoImg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"productName\",\n            children: movies.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productInfoBottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"id:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movies._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"genre:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movies.genre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"year:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movies.year\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productInfoItem\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoKey\",\n              children: \"limit:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"productInfoValue\",\n              children: movies.limit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"productBottom\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"productForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productFormLeft\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Movie Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: movies.title,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Year\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: movies.year,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Genre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: movies.genre,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Limit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: movies.limit,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Trailer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            placeholder: movies.trailer,\n            onChange: e => setTrailer(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            placeholder: movies.video,\n            onChange: e => setVideo(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"productFormRight\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"productUpload\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: movies.img,\n              alt: \"\",\n              className: \"productUploadImg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"file\",\n              children: /*#__PURE__*/_jsxDEV(Publish, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"file\",\n              style: {\n                display: \"none\"\n              },\n              onChange: e => setImg(e.target.files[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), uploaded === 3 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"productButton\",\n            onClick: handleSubmit,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"productButton\",\n            onClick: handleUpload,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Movie, \"L+jxWx0gu4bUdjo5aXdMzs2hiMg=\", false, function () {\n  return [useLocation];\n});\n\n_c = Movie;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movie\");","map":{"version":3,"sources":["C:/Users/HứaPhướcThanh/Pictures/NETFLIX_CLONE/admin/src/pages/movie/Movie.jsx"],"names":["Link","useLocation","Publish","Movie","location","movies","movie","setMovie","useState","img","setImg","imgTitle","setImgTitle","imgSm","setImgSm","trailer","setTrailer","video","setVideo","uploaded","setUploaded","dispatch","useContext","MovieContext","handleChange","e","value","target","name","upload","items","forEach","item","fileName","Date","getTime","label","file","storage","getStorage","storageRef","ref","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","getDownloadURL","then","url","prev","handleUpload","preventDefault","handleSubmit","updateMovie","_id","title","genre","year","limit","files","display"],"mappings":"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","sourcesContent":["import { Link, useLocation } from \"react-router-dom\";\r\nimport \"./movie.css\";\r\nimport { Publish } from \"@material-ui/icons\";\r\n\r\nexport default function Movie() {\r\n  const location = useLocation();\r\n  const movies = location.movie;\r\n  const [movie, setMovie] = useState(null);\r\n  const [img, setImg] = useState(null);\r\n  const [imgTitle, setImgTitle] = useState(null);\r\n  const [imgSm, setImgSm] = useState(null);\r\n  const [trailer, setTrailer] = useState(null);\r\n  const [video, setVideo] = useState(null);\r\n  const [uploaded, setUploaded] = useState(0);\r\n\r\n  const { dispatch } = useContext(MovieContext);\r\n\r\n  const handleChange = (e) => {\r\n    const value = e.target.value;\r\n    setMovie({ ...movie, [e.target.name]: value });\r\n  };\r\n\r\n  const upload = (items) => {\r\n    items.forEach((item) => {\r\n      const fileName = new Date().getTime() + item.label + item.file.name;\r\n      const storage = getStorage();\r\n      const storageRef = ref(storage, `/items/${fileName}`);\r\n      const uploadTask = uploadBytesResumable(storageRef, item.file);\r\n      //const uploadTask = storage.storage().ref(`/items/${fileName}`).put(item.file);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {\r\n          const progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n          console.log(\"Upload is \" + progress + \"% done\");\r\n          switch (snapshot.state) {\r\n            case 'paused':\r\n              console.log('Upload is paused');\r\n              break;\r\n            case 'running':\r\n              console.log('Upload is running');\r\n              break;\r\n          } \r\n        },\r\n        (error) => {\r\n          switch (error.code) {\r\n            case 'storage/unauthorized':\r\n              // User doesn't have permission to access the object\r\n              break;\r\n            case 'storage/canceled':\r\n              // User canceled the upload\r\n              break;\r\n      \r\n            // ...\r\n      \r\n            case 'storage/unknown':\r\n              // Unknown error occurred, inspect error.serverResponse\r\n              break;\r\n          }\r\n        },\r\n        () => {\r\n          getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n            setMovie((prev) => {\r\n              return { ...prev, [item.label]: url };\r\n            });\r\n            setUploaded((prev) => prev + 1);\r\n          });\r\n        }\r\n      );\r\n    });\r\n  };\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    upload([\r\n      { file: img, label: \"img\" },\r\n      { file: trailer, label: \"trailer\" },\r\n      { file: video, label: \"video\" },\r\n    ]);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    updateMovie(movies._id,movie, dispatch);\r\n  };\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"productTitleContainer\">\r\n        <h1 className=\"productTitle\">Movie</h1>\r\n        <Link to=\"/newproduct\">\r\n          <button className=\"productAddButton\">Create</button>\r\n        </Link>\r\n      </div>\r\n      <div className=\"productTop\">\r\n        <div className=\"productTopRight\">\r\n          <div className=\"productInfoTop\">\r\n            <img src={movies.img} alt=\"\" className=\"productInfoImg\" />\r\n            <span className=\"productName\">{movies.title}</span>\r\n          </div>\r\n          <div className=\"productInfoBottom\">\r\n            <div className=\"productInfoItem\">\r\n              <span className=\"productInfoKey\">id:</span>\r\n              <span className=\"productInfoValue\">{movies._id}</span>\r\n            </div>\r\n            <div className=\"productInfoItem\">\r\n              <span className=\"productInfoKey\">genre:</span>\r\n              <span className=\"productInfoValue\">{movies.genre}</span>\r\n            </div>\r\n            <div className=\"productInfoItem\">\r\n              <span className=\"productInfoKey\">year:</span>\r\n              <span className=\"productInfoValue\">{movies.year}</span>\r\n            </div>\r\n            <div className=\"productInfoItem\">\r\n              <span className=\"productInfoKey\">limit:</span>\r\n              <span className=\"productInfoValue\">{movies.limit}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"productBottom\">\r\n        <form className=\"productForm\">\r\n          <div className=\"productFormLeft\">\r\n            <label>Movie Title</label>\r\n            <input type=\"text\" placeholder={movies.title} onChange={handleChange}/>\r\n            <label>Year</label>\r\n            <input type=\"text\" placeholder={movies.year} onChange={handleChange}/>\r\n            <label>Genre</label>\r\n            <input type=\"text\" placeholder={movies.genre} onChange={handleChange}/>\r\n            <label>Limit</label>\r\n            <input type=\"text\" placeholder={movies.limit} onChange={handleChange}/>\r\n            <label>Trailer</label>\r\n            <input type=\"file\" placeholder={movies.trailer}  onChange={(e) => setTrailer(e.target.files[0])}/>\r\n            <label>Video</label>\r\n            <input type=\"file\" placeholder={movies.video} onChange={(e) => setVideo(e.target.files[0])}/>\r\n          </div>\r\n          <div className=\"productFormRight\">\r\n            <div className=\"productUpload\">\r\n              <img\r\n                src={movies.img}\r\n                alt=\"\"\r\n                className=\"productUploadImg\"\r\n              />\r\n              <label for=\"file\">\r\n                <Publish />\r\n              </label>\r\n              <input type=\"file\" id=\"file\" style={{ display: \"none\" }} onChange={(e) => setImg(e.target.files[0])}/>\r\n            </div>\r\n            {uploaded === 3 ? (\r\n          <button className=\"productButton\" onClick={handleSubmit}>\r\n            Update\r\n          </button>\r\n        ) : (\r\n          <button className=\"productButton\" onClick={handleUpload}>\r\n            Upload\r\n          </button>\r\n        )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}